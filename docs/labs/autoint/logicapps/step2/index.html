<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.93.3" />
    <meta name="description" content="SAP on Microsoft - Tutorials">
<meta name="author" content="Alexandre Bicas">

    <link rel="icon" href="/SapOnMicrosoftDemos/public/images/favicon.png" type="image/png">

    <title>Create a Workflow :: SAP on Microsoft - Tutorials</title>

    
    <link href="/SapOnMicrosoftDemos/public/css/nucleus.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/fontawesome-all.min.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/hybrid.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/featherlight.min.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/perfect-scrollbar.min.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/auto-complete.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/atom-one-dark-reasonable.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/theme.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/tabs.css?1646940534" rel="stylesheet">
    <link href="/SapOnMicrosoftDemos/public/css/hugo-theme.css?1646940534" rel="stylesheet">
    
    <link href="/SapOnMicrosoftDemos/public/css/theme-blue.css?1646940534" rel="stylesheet">
    
    

    <script src="/SapOnMicrosoftDemos/public/js/jquery-3.3.1.min.js?1646940534"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step2/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/images/MSAzure-logo.png">

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/SapOnMicrosoftDemos/public/js/lunr.min.js?1646940534"></script>
<script type="text/javascript" src="/SapOnMicrosoftDemos/public/js/auto-complete.js?1646940534"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/abicas.github.io\/SapOnMicrosoftDemos\/public\/";
    
</script>
<script type="text/javascript" src="/SapOnMicrosoftDemos/public/js/search.js?1646940534"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/" title="Environment Setup" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/">
          Environment Setup
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/azure_setup/" title="Azure Setup for SAP CAL" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/azure_setup/">
          <b> </b>Azure Setup for SAP CAL
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/azure_setup/azuread/" title="Create and Azure Active Directory application" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/azure_setup/azuread/">
          <b>1. </b>Create and Azure Active Directory application
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/azure_setup/adrole/" title="Assign Role to Application" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/azure_setup/adrole/">
          <b>2. </b>Assign Role to Application
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/azure_setup/getinfo/" title="Get required information" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/azure_setup/getinfo/">
          <b>3. </b>Get required information
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/sap_cal/" title="SAP Cloud Appliance Library (CAL)" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/sap_cal/">
          SAP Cloud Appliance Library (CAL)
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/sap_cal/accsetup/" title="SAP CAL Account Setup" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/sap_cal/accsetup/">
          <b>1. </b>SAP CAL Account Setup
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/sap_cal/rdpacc/" title="Remote Desktop Access" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/sap_cal/rdpacc/">
          <b>2. </b>Remote Desktop Access
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/datagwsetup/" title="Microsoft On-premises Data Gateway Installation" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/env_setup/datagwsetup/">
          <b></b>Microsoft On-premises Data Gateway Installation
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/datagwsetup/step1/" title="Remote Desktop Setup" class="dd-item ">
        <a href="/SapOnMicrosoftDemos/public/env_setup/datagwsetup/step1/">
        <b>1. </b>Remote Desktop Setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/SapOnMicrosoftDemos/public/env_setup/datagwsetup/step2/" title="Azure Data Gateway Setup" class="dd-item ">
        <a href="/SapOnMicrosoftDemos/public/env_setup/datagwsetup/step2/">
        <b>2. </b>Azure Data Gateway Setup
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/" title="SAP on Microsoft Labs" class="dd-item
        parent
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/">
          SAP on Microsoft Labs
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/autoint/" title="Automation and Integration" class="dd-item
        parent
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/autoint/">
          <b> </b>Automation and Integration
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/" title="Azure Logic Apps" class="dd-item
        parent
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/">
          <b> </b>Azure Logic Apps
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step1/" title="Create a Logic App" class="dd-item ">
        <a href="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step1/">
        <b>1. </b>Create a Logic App
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step2/" title="Create a Workflow" class="dd-item active">
        <a href="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step2/">
        <b>2. </b>Create a Workflow
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step3/" title="Running the lab" class="dd-item ">
        <a href="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step3/">
        <b>3. </b>Running the lab
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/autoint/virtualagents/" title="Power Virtual Agent" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/autoint/virtualagents/">
          <b> </b>Power Virtual Agent
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/autoint/automate/" title="Power Automate" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/autoint/automate/">
          <b> </b>Power Automate
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/autoint/powerapps/" title="Power Apps" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/autoint/powerapps/">
          <b> </b>Power Apps
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/dataai/" title="Data &amp; AI" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/dataai/">
          <b> </b>Data &amp; AI
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/security/" title="Security" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/security/">
          <b> </b>Security
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/SapOnMicrosoftDemos/public/labs/inframgmt/" title="Infrastructure and Management" class="dd-item
        
        
        
        ">
      <a href="/SapOnMicrosoftDemos/public/labs/inframgmt/">
          <b> </b>Infrastructure and Management
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/matcornic/hugo-theme-learn"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
              <li>
                  <a class="padding" href="https://abicas.github.io/SapOnMicrosoftDemos/public/showcase"><i class='fas fa-fw fa-camera'></i> Showcases</a>
              </li>
          
              <li>
                  <a class="padding" href="https://gohugo.io/"><i class='fas fa-fw fa-bookmark'></i> Hugo Documentation</a>
              </li>
          
              <li>
                  <a class="padding" href="https://abicas.github.io/SapOnMicrosoftDemos/public/credits"><i class='fas fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/SapOnMicrosoftDemos/public/'>SAP on Microsoft - Tutorials</a> > <a href='/SapOnMicrosoftDemos/public/labs/'>SAP on Microsoft Labs</a> > <a href='/SapOnMicrosoftDemos/public/labs/autoint/'>Automation and Integration</a> > <a href='/SapOnMicrosoftDemos/public/labs/autoint/logicapps/'>Azure Logic Apps</a> > Create a Workflow
          
        
          
        
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Create a Workflow
            </h1>
          

        


<p>In this step we will create the Workflow  on <a href="https://portal.azure.com">Azure Portal</a>.</p>
<ol>
<li>Go to <strong>Logic Apps</strong></li>
<li>Click on your Logic App <strong>SAPDemo</strong></li>
<li>Go to <strong>Workflows</strong> and <strong>Add</strong> a new one as the parameters below:
<img src="/images/logicapp02.png" alt="Logic App"></li>
<li>Click on <strong>Designer</strong> and let&rsquo;s start building the Workflow!</li>
<li>As the first operation, which starts the flow, we will pick <strong>When a HTTP request is received</strong>
<img src="/images/logicapp03.png" alt="Logic App"></li>
<li>In order to customize the payload we expect, let&rsquo;s <strong>Use a sample payload to generate schema</strong>
<ul>
<li>Sample payload: <code>{&quot;id&quot;: &quot;0000000728&quot;}</code>
<img src="/images/logicapp04.png" alt="Logic App"></li>
</ul>
</li>
<li>This will generate a schema for the trigger
<img src="/images/logicapp05.png" alt="Logic App"></li>
<li>Now we will create our temp variable to hold the desired part of the SAP reponse. Add a new action and type &ldquo;initialize&rdquo; on the search box. Select <strong>Initialize Variables</strong>
<img src="/images/logicapp06.png" alt="Logic App"></li>
<li>In this step, we will create na empty array to store the data:
<ul>
<li>Name: <strong>outputArray</strong></li>
<li>Type: <strong>Array</strong></li>
<li>Value: <strong>[]</strong>
<img src="/images/logicapp07.png" alt="Logic App"></li>
</ul>
</li>
<li>Next we will invoke BAPI method in SAP by adding a new Action (make sure you select <strong>Azure</strong> ) called <strong>[BAPI] Call method in SAP</strong>
<img src="/images/logicapp08.png" alt="Logic App"></li>
<li>Now we need to link this BAPI call with the On-premises Data Gateway we installed on Bastion Host. Click on <strong>Change connection</strong>
<img src="/images/logicapp09.png" alt="Logic App"></li>
<li>An now we provide the connection information required so Logic Apps can communicate with SAP:
<ul>
<li>Connection Name: <strong>SAPS4CAL</strong></li>
<li>DataGateway: Select your Gateway, in this case SapDemoGW</li>
<li>Client: <strong>100</strong></li>
<li>Auth: <strong>Basic</strong></li>
<li>User: <strong>BPINST</strong></li>
<li>Password: <strong>Welcome1</strong></li>
<li>AS HOST: Public IP of your SAP HANA on SAP CAL (this IP will change if you shutdown SAP. You will have to follow the same procedure to manually update upon activation or resort to dynamic DNS)</li>
<li>AS SERVICE: <strong>50000</strong></li>
<li>AS SYSTEM NUMBER: <strong>00</strong></li>
<li>Accept other defaults and click <strong>Create</strong>
<img src="/images/logicapp10.png" alt="Logic App"></li>
</ul>
</li>
<li>Logic App will test the connection and you should see the <strong>Connected</strong> status
<img src="/images/logicapp11.png" alt="Logic App"></li>
<li>Now let&rsquo;s setup the BAPI method to be invoked
<ul>
<li>Business Object: <strong>BUS2032:SalesOrder</strong></li>
<li>Method: <strong>GETSTATUS:Display Sales Order:BAPI_SALESORDER_GETSTATUS</strong></li>
<li>Input: <code>&lt;GETSTATUS xmlns=&quot;http://Microsoft.LobServices.Sap/2007/03/Rfc/&quot;&gt;&lt;SALESDOCUMENT&gt;xxx&lt;/SALESDOCUMENT&gt;&lt;/GETSTATUS&gt;</code></li>
<li>Replace xxx on the above Input with a Dynamic Content <strong>id</strong> extracted from the trigger on step 7. Make sure there are no spaces between SALESDOCUMENT
<img src="/images/logicapp12.png" alt="Logic App">
<img src="/images/logicapp14.png" alt="Logic App"></li>
</ul>
</li>
<li>Add a new <strong>Parse JSON</strong> action
<img src="/images/logicapp15.png" alt="Logic App"></li>
<li>In content use <strong>JsonResponse</strong> that will be passed by BAPI
<img src="/images/logicapp16.png" alt="Logic App"></li>
<li>As we did on the initial step, select <strong>Use sample payload to generate schema</strong> and use the following JSON sample
<code>{&quot;STATUSINFO&quot;:[{&quot;DOC_NUMBER&quot;:&quot;0000000728&quot;,&quot;DOC_DATE&quot;:&quot;2018-11-06&quot;,&quot;PURCH_NO&quot;:&quot;xcwer&quot;,&quot;PRC_STAT_H&quot;:&quot;C&quot;,&quot;DLV_STAT_H&quot;:&quot;C&quot;,&quot;REQ_DATE_H&quot;:&quot;2018-11-06&quot;,&quot;DLV_BLOCK&quot;:&quot;&quot;,&quot;ITM_NUMBER&quot;:&quot;000010&quot;,&quot;MATERIAL&quot;:&quot;CM-FL-V01&quot;,&quot;SHORT_TEXT&quot;:&quot;Forklift&quot;,&quot;REQ_DATE&quot;:&quot;2018-11-21&quot;,&quot;REQ_QTY&quot;:1.0,&quot;CUM_CF_QTY&quot;:1.0,&quot;SALES_UNIT&quot;:&quot;ST&quot;,&quot;NET_VALUE&quot;:8000.0,&quot;CURRENCY&quot;:&quot;USD&quot;,&quot;NET_PRICE&quot;:8000.0,&quot;COND_P_UNT&quot;:1.0,&quot;COND_UNIT&quot;:&quot;ST&quot;,&quot;DLV_STAT_I&quot;:&quot;C&quot;,&quot;DELIV_NUMB&quot;:&quot;&quot;,&quot;DELIV_ITEM&quot;:&quot;000000&quot;,&quot;DELIV_DATE&quot;:&quot;&quot;,&quot;DLV_QTY&quot;:0.0,&quot;REF_QTY&quot;:0.0,&quot;S_UNIT_ISO&quot;:&quot;PCE&quot;,&quot;CD_UNT_ISO&quot;:&quot;PCE&quot;,&quot;CURR_ISO&quot;:&quot;USD&quot;,&quot;MATERIAL_EXTERNAL&quot;:&quot;&quot;,&quot;MATERIAL_GUID&quot;:&quot;&quot;,&quot;MATERIAL_VERSION&quot;:&quot;&quot;,&quot;PO_ITM_NO&quot;:&quot;&quot;,&quot;CREATION_DATE&quot;:&quot;&quot;,&quot;CREATION_TIME&quot;:&quot;00:00:00&quot;,&quot;S_UNIT_DLV&quot;:&quot;&quot;,&quot;DLV_UNIT_ISO&quot;:&quot;&quot;,&quot;REA_FOR_RE&quot;:&quot;70&quot;,&quot;PURCH_NO_C&quot;:&quot;xcwer&quot;,&quot;MATERIAL_LONG&quot;:&quot;CM-FL-V01&quot;},{&quot;DOC_NUMBER&quot;:&quot;0000000728&quot;,&quot;DOC_DATE&quot;:&quot;2018-11-06&quot;,&quot;PURCH_NO&quot;:&quot;xcwer&quot;,&quot;PRC_STAT_H&quot;:&quot;C&quot;,&quot;DLV_STAT_H&quot;:&quot;C&quot;,&quot;REQ_DATE_H&quot;:&quot;2018-11-06&quot;,&quot;DLV_BLOCK&quot;:&quot;&quot;,&quot;ITM_NUMBER&quot;:&quot;000020&quot;,&quot;MATERIAL&quot;:&quot;CM-FL-V00&quot;,&quot;SHORT_TEXT&quot;:&quot;Forklift&quot;,&quot;REQ_DATE&quot;:&quot;2018-11-06&quot;,&quot;REQ_QTY&quot;:7.0,&quot;CUM_CF_QTY&quot;:0.0,&quot;SALES_UNIT&quot;:&quot;ST&quot;,&quot;NET_VALUE&quot;:58800.0,&quot;CURRENCY&quot;:&quot;USD&quot;,&quot;NET_PRICE&quot;:8400.0,&quot;COND_P_UNT&quot;:1.0,&quot;COND_UNIT&quot;:&quot;ST&quot;,&quot;DLV_STAT_I&quot;:&quot;C&quot;,&quot;DELIV_NUMB&quot;:&quot;&quot;,&quot;DELIV_ITEM&quot;:&quot;000000&quot;,&quot;DELIV_DATE&quot;:&quot;&quot;,&quot;DLV_QTY&quot;:0.0,&quot;REF_QTY&quot;:0.0,&quot;S_UNIT_ISO&quot;:&quot;PCE&quot;,&quot;CD_UNT_ISO&quot;:&quot;PCE&quot;,&quot;CURR_ISO&quot;:&quot;USD&quot;,&quot;MATERIAL_EXTERNAL&quot;:&quot;&quot;,&quot;MATERIAL_GUID&quot;:&quot;&quot;,&quot;MATERIAL_VERSION&quot;:&quot;&quot;,&quot;PO_ITM_NO&quot;:&quot;&quot;,&quot;CREATION_DATE&quot;:&quot;&quot;,&quot;CREATION_TIME&quot;:&quot;00:00:00&quot;,&quot;S_UNIT_DLV&quot;:&quot;&quot;,&quot;DLV_UNIT_ISO&quot;:&quot;&quot;,&quot;REA_FOR_RE&quot;:&quot;70&quot;,&quot;PURCH_NO_C&quot;:&quot;xcwer&quot;,&quot;MATERIAL_LONG&quot;:&quot;CM-FL-V00&quot;}]}</code>
<img src="/images/logicapp17.png" alt="Logic App"></li>
<li>SAP Sales Order can have multiple Line Items, so we have to iterate in them. Add na <strong>For Each</strong> action and as parameter, <strong>STATUSINFO</strong> from Parse JSON previous action.
<img src="/images/logicapp18.png" alt="Logic App"></li>
<li>Inside the For Each loop add a <strong>Compose</strong> action. It will allow for us to pick desired fields for each line and build a JSON that suits our needs.
<img src="/images/logicapp19.png" alt="Logic App"></li>
<li>Build the desired JSON using the sample JSON below and replacing fields enclosed by <code>&lt;&gt;</code> using <strong>Dynamic Inputs</strong> as inputs (make sure you keep the commas)
<code>{  &quot;Order&quot;: &lt;DOC_NUMBER&gt;, &quot;Date&quot;: &lt;DOC_DATE&gt;, &quot;Item&quot;: &lt;MATERIAL&gt;, &quot;Description&quot;: &lt;SHORT_TEXT&gt;, &quot;Quantity&quot;: &lt;REQ_QTY&gt;, &quot;Price&quot;: &lt;NET_PRICE&gt; } </code>
<img src="/images/logicapp20.png" alt="Logic App"></li>
<li>Inside the For Each loop, after Compose, add na action <strong>Append to array variable</strong>. Select <strong>outputArray</strong> previously initialized as empty and for Value <strong>Outputs</strong> from Compose action
<img src="/images/logicapp21.png" alt="Logic App"></li>
<li>Once For Each runs and populates outputArray with the desired data, we will convert it to an HTML table. Add a <strong>Create HTML table</strong> Action and use the <strong>outputArray</strong> as the data for the table.
<img src="/images/logicapp22.png" alt="Logic App"></li>
<li>Finally, we will add an action <strong>Send an email</strong> from <strong>Office 365 Outlook</strong>. You may need to connect Logic Apps with Office 365, by clicking on <strong>Change connection</strong> as did previously for SAP.
<img src="/images/logicapp23.png" alt="Logic App"></li>
<li>Let&rsquo;s now build the email template that will be used on every invocation
<ul>
<li>To: <strong>Destination email</strong></li>
<li>Subject: <strong>Details for order <!-- raw HTML omitted --></strong> (replace with dynamic content)</li>
<li>Body: as picture below
<img src="/images/logicapp24.png" alt="Logic App"></li>
</ul>
</li>
<li>As the API response we will add a <strong>Response</strong> action and return
<ul>
<li>Status Code: <strong>200</strong></li>
<li>Body: <strong>JsonResponse</strong> from Dynamic inputs
<img src="/images/logicapp25.png" alt="Logic App"></li>
</ul>
</li>
<li>Don&rsquo;t forget to click <strong>SAVE</strong> !!!! ;)
<img src="/images/logicapp26.png" alt="Logic App"></li>
</ol>
<p>If everything wen&rsquo;t fine, we are ready to test the lab we just built, with NO CODE at all !</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step1/" title="Create a Logic App"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/SapOnMicrosoftDemos/public/labs/autoint/logicapps/step3/" title="Running the lab" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/SapOnMicrosoftDemos/public/js/clipboard.min.js?1646940534"></script>
    <script src="/SapOnMicrosoftDemos/public/js/perfect-scrollbar.min.js?1646940534"></script>
    <script src="/SapOnMicrosoftDemos/public/js/perfect-scrollbar.jquery.min.js?1646940534"></script>
    <script src="/SapOnMicrosoftDemos/public/js/jquery.sticky.js?1646940534"></script>
    <script src="/SapOnMicrosoftDemos/public/js/featherlight.min.js?1646940534"></script>
    <script src="/SapOnMicrosoftDemos/public/js/highlight.pack.js?1646940534"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/SapOnMicrosoftDemos/public/js/modernizr.custom-3.6.0.js?1646940534"></script>
    <script src="/SapOnMicrosoftDemos/public/js/learn.js?1646940534"></script>
    <script src="/SapOnMicrosoftDemos/public/js/hugo-learn.js?1646940534"></script>
    
        
            <script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

